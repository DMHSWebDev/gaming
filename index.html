<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Arrow Key Game</title>
    <link rel="stylesheet" href="styles.css" />
</head>

<body>
    <div class="container">
        <h1>Move the square with Arrow Keys or WASD</h1>
        <div id="start-overlay" style="position:fixed;z-index:10;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.85);display:flex;align-items:center;justify-content:center;flex-direction:column;">
            <h1 style="color:#fff;font-size:2rem;margin-bottom:1rem;">Click to Start</h1>
            <button id="start-btn" style="font-size:1.2rem;padding:0.7em 2em;border-radius:8px;border:none;background:#3498db;color:#fff;cursor:pointer;">Start Game</button>
        </div>
        <canvas id="game" tabindex="0"></canvas>

        <div class="mobile-controls">
            <div class="mobile-left">
                <button id="btn-left" aria-label="Left" class="circle-btn">&#8592;</button>
                <button id="btn-right" aria-label="Right" class="circle-btn">&#8594;</button>
            </div>
            <div class="mobile-right">
                <button id="btn-jump" aria-label="Jump" class="circle-btn">&#8593;</button>
            </div>
        </div>
    </div>
    <script type="module">
        import SoundManager from './sound_manager.js';
        import './game_engine_3.js';
        // Wait for user interaction before starting game
        const overlay = document.getElementById('start-overlay');
        const startBtn = document.getElementById('start-btn');
        function startGameWithSound() {
            overlay.style.display = 'none';
            window.dispatchEvent(new Event('game-start'));
        }
        startBtn.addEventListener('click', startGameWithSound);
        // Also allow tap/click anywhere on overlay
        overlay.addEventListener('click', e => {
            if (e.target === overlay) startGameWithSound();
        });
    </script>
</body>

</html>